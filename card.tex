\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
@PYay[class] @PYaO[Card] @PYbd[<] @PYaq[ActiveRecord]@PYbd[::]@PYaq[Base]
  @PYaf[# ...]

  state_machine @PYau[:initial] @PYbd[=]@PYbd[>] @PYau[:tapped] @PYay[do]
    event @PYau[:untap] @PYay[do]
      transition @PYau[:tapped] @PYbd[=]@PYbd[>] @PYau[:untapped]
    @PYay[end]

    before_transition @PYau[:on] @PYbd[=]@PYbd[>] @PYau[:untap], @PYau[:do] @PYbd[=]@PYbd[>] @PYau[:before_untap]

    event @PYau[:play] @PYay[do]
      transition @PYau[:untapped] @PYbd[=]@PYbd[>] @PYau[:graveyard]
    @PYay[end]

    before_transition @PYau[:on] @PYbd[=]@PYbd[>] @PYau[:play], @PYau[:do] @PYbd[=]@PYbd[>] @PYau[:before_play]
  @PYay[end]

  @PYaf[# ...]
@PYay[end]
\end{Verbatim}
