\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
@PYay[class] @PYaO[Hex] @PYbd[<] @PYaq[ActiveRecord]@PYbd[::]@PYaq[Base]
  @PYaf[# ...]

  @PYay[def] @PYaO[self]@PYbd[.]@PYaL[find_by_positions](positions)
    find(@PYau[:all],
         @PYau[:conditions] @PYbd[=]@PYbd[>] @PYbd[@lb[]]@PYaW["]@PYaW[(hexes.row = ? AND hexes.col = ?) OR ]@PYaW["] @PYbd[*]
                         positions@PYbd[.]size @PYbd[+] @PYaW["]@PYaW[ 0 = 1]@PYaW["],
                         @PYbd[*]positions@PYbd[.]flatten@PYbd[@rb[]])
  @PYay[end]

  @PYay[def] @PYaL[hex_positions]
    @PYbd[@lb[]]@PYbd[@lb[]]row @PYbd[-] @PYag[1], col @PYbd[+] @PYag[1]@PYbd[@rb[]],
     @PYbd[@lb[]]row @PYbd[-] @PYag[1], col@PYbd[@rb[]],
     @PYbd[@lb[]]row, col @PYbd[-] @PYag[1]@PYbd[@rb[]],
     @PYbd[@lb[]]row @PYbd[+] @PYag[1], col @PYbd[-] @PYag[1]@PYbd[@rb[]],
     @PYbd[@lb[]]row @PYbd[+] @PYag[1], col@PYbd[@rb[]],
     @PYbd[@lb[]]row, col @PYbd[+] @PYag[1]@PYbd[@rb[]]@PYbd[@rb[]]
  @PYay[end]

  @PYay[def] @PYaL[hexes]
    board_hexes@PYbd[.]find_by_positions(hex_positions)
  @PYay[end]

  @PYaf[# ...]
@PYay[end]
\end{Verbatim}
