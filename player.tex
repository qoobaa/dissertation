\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
@PYay[class] @PYaO[Player] @PYbd[<] @PYaq[ActiveRecord]@PYbd[::]@PYaq[Base]
  @PYaf[# ...]

  state_machine @PYau[:initial] @PYbd[=]@PYbd[>] @PYau[:preparing] @PYay[do]
    event @PYau[:start] @PYay[do]
      transition @PYau[:preparing] @PYbd[=]@PYbd[>] @PYau[:ready]
    @PYay[end]

    event @PYau[:play] @PYay[do]
      transition @PYau[:ready] @PYbd[=]@PYbd[>] @PYau[:playing]
    @PYay[end]

    after_transition @PYau[:on] @PYbd[=]@PYbd[>] @PYau[:start] @PYay[do] @PYbd[|]player@PYbd[|]
      player@PYbd[.]game_start_game
    @PYay[end]
  @PYay[end]

  @PYaf[# ...]
@PYay[end]
\end{Verbatim}
